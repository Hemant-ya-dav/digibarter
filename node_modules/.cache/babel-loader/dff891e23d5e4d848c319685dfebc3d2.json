{"ast":null,"code":"import * as usersAPI from \"./users-api\";\nexport async function signUp(userData) {\n  try {\n    console.log(\"jsdfjkjsddfjlsdnfjlksdfn\");\n    const userSigned = await usersAPI.signUp(userData);\n    localStorage.setItem(\"token\", token);\n    return userSigned;\n  } catch {\n    throw new Error(\"Invalid Sign Up\");\n  }\n}\nexport async function login(credentials) {\n  try {\n    const token = await usersAPI.login(credentials);\n    localStorage.setItem(\"token\", token);\n    return getUser();\n  } catch {\n    throw new Error(\"Invalid Credentials - Try Again\");\n  }\n}\nexport function getToken() {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return null;\n  const payload = JSON.parse(atob(token.split(\".\")[1]));\n\n  if (payload.exp < Date.now() / 1000) {\n    localStorage.removeItem(\"token\");\n    return null;\n  }\n\n  return token;\n}\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split(\".\")[1])).user : null;\n}\nexport function logOut() {\n  localStorage.removeItem(\"token\");\n}","map":{"version":3,"sources":["C:/Users/Riya/OneDrive/Desktop/trader-among-us-master/src/utils/users-service.js"],"names":["usersAPI","signUp","userData","console","log","userSigned","localStorage","setItem","token","Error","login","credentials","getUser","getToken","getItem","payload","JSON","parse","atob","split","exp","Date","now","removeItem","user","logOut"],"mappings":"AAAA,OAAO,KAAKA,QAAZ,MAA0B,aAA1B;AAEA,OAAO,eAAeC,MAAf,CAAsBC,QAAtB,EAAgC;AACrC,MAAI;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACA,UAAMC,UAAU,GAAG,MAAML,QAAQ,CAACC,MAAT,CAAgBC,QAAhB,CAAzB;AACAI,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,KAA9B;AACA,WAAOH,UAAP;AACD,GALD,CAKE,MAAM;AACN,UAAM,IAAII,KAAJ,CAAU,iBAAV,CAAN;AACD;AACF;AAED,OAAO,eAAeC,KAAf,CAAqBC,WAArB,EAAkC;AACvC,MAAI;AACF,UAAMH,KAAK,GAAG,MAAMR,QAAQ,CAACU,KAAT,CAAeC,WAAf,CAApB;AACAL,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,KAA9B;AACA,WAAOI,OAAO,EAAd;AACD,GAJD,CAIE,MAAM;AACN,UAAM,IAAIH,KAAJ,CAAU,iCAAV,CAAN;AACD;AACF;AAED,OAAO,SAASI,QAAT,GAAoB;AACzB,QAAML,KAAK,GAAGF,YAAY,CAACQ,OAAb,CAAqB,OAArB,CAAd;AACA,MAAI,CAACN,KAAL,EAAY,OAAO,IAAP;AAEZ,QAAMO,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACV,KAAK,CAACW,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,CAAhB;;AACA,MAAIJ,OAAO,CAACK,GAAR,GAAcC,IAAI,CAACC,GAAL,KAAa,IAA/B,EAAsC;AACpChB,IAAAA,YAAY,CAACiB,UAAb,CAAwB,OAAxB;AACA,WAAO,IAAP;AACD;;AACD,SAAOf,KAAP;AACD;AAED,OAAO,SAASI,OAAT,GAAmB;AACxB,QAAMJ,KAAK,GAAGK,QAAQ,EAAtB;AACA,SAAOL,KAAK,GAAGQ,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACV,KAAK,CAACW,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,EAAsCK,IAAzC,GAAgD,IAA5D;AACD;AAED,OAAO,SAASC,MAAT,GAAkB;AACvBnB,EAAAA,YAAY,CAACiB,UAAb,CAAwB,OAAxB;AACD","sourcesContent":["import * as usersAPI from \"./users-api\";\n\nexport async function signUp(userData) {\n  try {\n    console.log(\"jsdfjkjsddfjlsdnfjlksdfn\")\n    const userSigned = await usersAPI.signUp(userData);\n    localStorage.setItem(\"token\", token);\n    return userSigned;\n  } catch {\n    throw new Error(\"Invalid Sign Up\");\n  }\n}\n\nexport async function login(credentials) {\n  try {\n    const token = await usersAPI.login(credentials);\n    localStorage.setItem(\"token\", token);\n    return getUser();\n  } catch {\n    throw new Error(\"Invalid Credentials - Try Again\");\n  }\n}\n\nexport function getToken() {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return null;\n\n  const payload = JSON.parse(atob(token.split(\".\")[1]));\n  if (payload.exp < Date.now() / 1000 ) {\n    localStorage.removeItem(\"token\");\n    return null;\n  }\n  return token;\n}\n\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split(\".\")[1])).user : null;\n}\n\nexport function logOut() {\n  localStorage.removeItem(\"token\");\n}"]},"metadata":{},"sourceType":"module"}