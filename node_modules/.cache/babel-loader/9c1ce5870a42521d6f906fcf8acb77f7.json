{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Riya\\\\OneDrive\\\\Desktop\\\\trader-among-us-master\\\\src\\\\pages\\\\PostIdPage\\\\PostIdPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport PostsApi from \"../../utils/posts-api\";\nimport PageTitle from \"../../components/PageTitle/PageTitle\";\nimport Reply from \"../../components/Reply/Reply\";\nimport \"./PostIdPage.css\";\nimport Bid from \"../../components/Bid/Bid\";\nimport Carousel from \"../../components/Carousel/Carousel\";\nimport { getUser } from \"../../utils/users-service\";\nimport DeleteButton from \"../../components/DeleteButton/DeleteButton\";\nimport { useHistory } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function PostIdPage({\n  match,\n  user\n}) {\n  _s();\n\n  const currentUser = getUser();\n  const history = useHistory(); // TODO API Calls and posts state are temporarily here, but should be moved up to a Page\n\n  const [post, setPost] = useState({\n    title: \"\",\n    text: \"\",\n    itemsOffered: [],\n    date: undefined,\n    author: {\n      name: \"\",\n      id: \"\"\n    }\n  });\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  const handleDelete = id => {\n    PostsApi.deletePost(id).then(history.push(\"/posts\"));\n  };\n\n  const formatter = new Intl.DateTimeFormat(\"en-GB\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"2-digit\",\n    hour: \"numeric\",\n    minute: \"numeric\",\n    hour12: true,\n    timeZone: \"EST\"\n  }); // Load posts here with an API call on component mount.\n  // Using a promise since useEffect must be synchronous.\n\n  function loadPosts() {\n    PostsApi.getOnePost(match.params.id).then(data => setPost({ ...data,\n      title: data.title.toUpperCase(),\n      date: formatter.format(Date.parse(data.createdAt))\n    })).catch(err => setErrorMsg(err.message));\n  }\n\n  useEffect(() => {\n    loadPosts();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      children: errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(PageTitle, {\n        titleOne: \"VIEW\",\n        titleTwo: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"PostIdPage post-page-column\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PostIdPage post-page-row\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PostIdPage post-page-row\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PostIdPage post-page-row\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          id: \"form-p-pink\",\n          children: post.date\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PostIdPage post-page-row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-offering\",\n          children: [post.author.name, \" is offering:\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PostIdPage post-page-row\",\n        children: /*#__PURE__*/_jsxDEV(Carousel, {\n          post: post\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PostIdPage post-page-row\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"flex-p\",\n          children: post.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"PostIdPage post-page-row\",\n        children: currentUser._id !== post.author._id ? /*#__PURE__*/_jsxDEV(Bid, {\n          user: user,\n          loadPosts: loadPosts,\n          postId: match.params.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(DeleteButton, {\n          handleDelete: () => handleDelete(post._id)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"PostIdPage post-page-column\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Post-post-title\",\n        children: [post.title, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), \" currently has \", post.replies ? post.replies.length : 0, \" bid(s)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), post.replies ? post.replies.map((reply, idx) => {\n        return /*#__PURE__*/_jsxDEV(Reply, {\n          post: post,\n          reply: reply\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 20\n        }, this);\n      }) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PostIdPage, \"rPYd439/glnXvo53J3pNAO9VB/c=\", false, function () {\n  return [useHistory];\n});\n\n_c = PostIdPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostIdPage\");","map":{"version":3,"sources":["C:/Users/Riya/OneDrive/Desktop/trader-among-us-master/src/pages/PostIdPage/PostIdPage.jsx"],"names":["React","useState","useEffect","PostsApi","PageTitle","Reply","Bid","Carousel","getUser","DeleteButton","useHistory","PostIdPage","match","user","currentUser","history","post","setPost","title","text","itemsOffered","date","undefined","author","name","id","errorMsg","setErrorMsg","handleDelete","deletePost","then","push","formatter","Intl","DateTimeFormat","year","month","day","hour","minute","hour12","timeZone","loadPosts","getOnePost","params","data","toUpperCase","format","Date","parse","createdAt","catch","err","message","_id","replies","length","map","reply","idx"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PostsApi from \"../../utils/posts-api\";\nimport PageTitle from \"../../components/PageTitle/PageTitle\";\nimport Reply from \"../../components/Reply/Reply\";\nimport \"./PostIdPage.css\";\nimport Bid from \"../../components/Bid/Bid\";\nimport Carousel from \"../../components/Carousel/Carousel\";\nimport { getUser } from \"../../utils/users-service\";\nimport DeleteButton from \"../../components/DeleteButton/DeleteButton\";\nimport { useHistory } from \"react-router-dom\";\n\nexport default function PostIdPage({ match, user }) {\n  const currentUser = getUser();\n  const history = useHistory();\n\n  // TODO API Calls and posts state are temporarily here, but should be moved up to a Page\n  const [post, setPost] = useState({\n    title: \"\",\n    text: \"\",\n    itemsOffered: [],\n    date: undefined,\n    author: {\n      name: \"\",\n      id: \"\",\n    }\n  });\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  const handleDelete = (id) => {\n    PostsApi.deletePost(id)\n      .then(history.push(\"/posts\"));\n  };\n\n  const formatter = new Intl.DateTimeFormat(\"en-GB\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"2-digit\",\n    hour: \"numeric\",\n    minute: \"numeric\",\n    hour12: true,\n    timeZone: \"EST\",\n  });\n\n  // Load posts here with an API call on component mount.\n  // Using a promise since useEffect must be synchronous.\n  function loadPosts() {\n    PostsApi.getOnePost(match.params.id)\n      .then((data) =>\n        setPost({\n          ...data,\n          title: data.title.toUpperCase(),\n          date: formatter.format(Date.parse(data.createdAt)),\n        })\n      )\n      .catch((err) => setErrorMsg(err.message));\n  }\n\n  useEffect(() => {\n    loadPosts();\n  }, []);\n\n  return (\n    <>\n      <span>{errorMsg}</span>\n      <div>\n        <PageTitle titleOne={\"VIEW\"} titleTwo={post.title} />\n      </div>\n      <div className=\"PostIdPage post-page-column\">\n        <div className=\"PostIdPage post-page-row\"></div>\n        <div className=\"PostIdPage post-page-row\">\n\n        </div>\n        <div className=\"PostIdPage post-page-row\">\n          <p id=\"form-p-pink\">{post.date}</p>\n        </div>\n        <div className=\"PostIdPage post-page-row\">\n          <div className=\"post-offering\">{post.author.name} is offering:</div>\n        </div>\n        <div className=\"PostIdPage post-page-row\">\n          <Carousel post={post} />\n        </div>\n        <div className=\"PostIdPage post-page-row\">\n          <p className=\"flex-p\">{post.text}</p>\n        </div>\n        <div className=\"PostIdPage post-page-row\">\n          {currentUser._id !== post.author._id ? (\n            <Bid user={user} loadPosts={loadPosts} postId={match.params.id} />\n          ) : (\n            <DeleteButton handleDelete={() => handleDelete(post._id)} />\n          )}\n        </div>\n      </div>\n      <div className=\"PostIdPage post-page-column\">\n        <div className=\"Post-post-title\">\n          {post.title}\n          <br /> currently has {post.replies ? post.replies.length : 0} bid(s)\n        </div>\n        {post.replies\n          ? post.replies.map((reply, idx) => {\n            return <Reply key={idx} post={post} reply={reply} />;\n          })\n          : null}\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}