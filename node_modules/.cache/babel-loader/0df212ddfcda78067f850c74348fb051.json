{"ast":null,"code":"import * as usersAPI from \"./users-api\";\nexport async function signUp(userData) {\n  try {\n    const token = await usersAPI.signUp(userData);\n    localStorage.setItem(\"token\", token);\n    return getUser();\n  } catch {\n    throw new Error(\"Invalid Sign Up\");\n  }\n}\nexport async function login(credentials) {\n  try {\n    const token = await usersAPI.login(credentials);\n    localStorage.setItem(\"token\", token);\n    return getUser();\n  } catch {\n    throw new Error(\"Invalid Credentials - Try Again\");\n  }\n}\nexport function getToken() {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return null;\n  const payload = JSON.parse(atob(token.split(\".\")[1]));\n\n  if (payload.exp < Date.now() / 1000) {\n    localStorage.removeItem(\"token\");\n    return null;\n  }\n\n  return token;\n}\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split(\".\")[1])).user : null;\n}\nexport function logOut() {\n  localStorage.removeItem(\"token\");\n}","map":{"version":3,"sources":["C:/Users/Riya/OneDrive/Desktop/trader-among-us-master/src/utils/users-service.js"],"names":["usersAPI","signUp","userData","token","localStorage","setItem","getUser","Error","login","credentials","getToken","getItem","payload","JSON","parse","atob","split","exp","Date","now","removeItem","user","logOut"],"mappings":"AAAA,OAAO,KAAKA,QAAZ,MAA0B,aAA1B;AAEA,OAAO,eAAeC,MAAf,CAAsBC,QAAtB,EAAgC;AACrC,MAAI;AACF,UAAMC,KAAK,GAAG,MAAMH,QAAQ,CAACC,MAAT,CAAgBC,QAAhB,CAApB;AACAE,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACA,WAAOG,OAAO,EAAd;AACD,GAJD,CAIE,MAAM;AACN,UAAM,IAAIC,KAAJ,CAAU,iBAAV,CAAN;AACD;AACF;AAED,OAAO,eAAeC,KAAf,CAAqBC,WAArB,EAAkC;AACvC,MAAI;AACF,UAAMN,KAAK,GAAG,MAAMH,QAAQ,CAACQ,KAAT,CAAeC,WAAf,CAApB;AACAL,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACA,WAAOG,OAAO,EAAd;AACD,GAJD,CAIE,MAAM;AACN,UAAM,IAAIC,KAAJ,CAAU,iCAAV,CAAN;AACD;AACF;AAED,OAAO,SAASG,QAAT,GAAoB;AACzB,QAAMP,KAAK,GAAGC,YAAY,CAACO,OAAb,CAAqB,OAArB,CAAd;AACA,MAAI,CAACR,KAAL,EAAY,OAAO,IAAP;AAEZ,QAAMS,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACZ,KAAK,CAACa,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,CAAhB;;AACA,MAAIJ,OAAO,CAACK,GAAR,GAAcC,IAAI,CAACC,GAAL,KAAa,IAA/B,EAAsC;AACpCf,IAAAA,YAAY,CAACgB,UAAb,CAAwB,OAAxB;AACA,WAAO,IAAP;AACD;;AACD,SAAOjB,KAAP;AACD;AAED,OAAO,SAASG,OAAT,GAAmB;AACxB,QAAMH,KAAK,GAAGO,QAAQ,EAAtB;AACA,SAAOP,KAAK,GAAGU,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACZ,KAAK,CAACa,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,EAAsCK,IAAzC,GAAgD,IAA5D;AACD;AAED,OAAO,SAASC,MAAT,GAAkB;AACvBlB,EAAAA,YAAY,CAACgB,UAAb,CAAwB,OAAxB;AACD","sourcesContent":["import * as usersAPI from \"./users-api\";\n\nexport async function signUp(userData) {\n  try {\n    const token = await usersAPI.signUp(userData);\n    localStorage.setItem(\"token\", token);\n    return getUser();\n  } catch {\n    throw new Error(\"Invalid Sign Up\");\n  }\n}\n\nexport async function login(credentials) {\n  try {\n    const token = await usersAPI.login(credentials);\n    localStorage.setItem(\"token\", token);\n    return getUser();\n  } catch {\n    throw new Error(\"Invalid Credentials - Try Again\");\n  }\n}\n\nexport function getToken() {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return null;\n\n  const payload = JSON.parse(atob(token.split(\".\")[1]));\n  if (payload.exp < Date.now() / 1000 ) {\n    localStorage.removeItem(\"token\");\n    return null;\n  }\n  return token;\n}\n\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split(\".\")[1])).user : null;\n}\n\nexport function logOut() {\n  localStorage.removeItem(\"token\");\n}"]},"metadata":{},"sourceType":"module"}