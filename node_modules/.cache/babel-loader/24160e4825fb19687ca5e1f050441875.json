{"ast":null,"code":"import * as usersAPI from \"./users-api\";\nexport async function signUp(userData) {\n  try {\n    console.log(\"jsdfjkjsddfjlsdnfjlksdfn\");\n    const userSigned = await usersAPI.signUp(userData);\n    return userSigned;\n  } catch {\n    throw new Error(\"Invalid Sign Up\");\n  }\n}\nexport async function login(credentials) {\n  try {\n    const token = await usersAPI.login(credentials);\n    localStorage.setItem(\"token\", token);\n    return getUser();\n  } catch {\n    throw new Error(\"Invalid Credentials - Try Again\");\n  }\n}\nexport function getToken() {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return null;\n  const payload = JSON.parse(atob(token.split(\".\")[1]));\n\n  if (payload.exp < Date.now() / 1000) {\n    localStorage.removeItem(\"token\");\n    return null;\n  }\n\n  return token;\n}\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split(\".\")[1])).user : null;\n}\nexport function logOut() {\n  localStorage.removeItem(\"token\");\n}","map":{"version":3,"sources":["C:/Users/Riya/OneDrive/Desktop/trader-among-us-master/src/utils/users-service.js"],"names":["usersAPI","signUp","userData","console","log","userSigned","Error","login","credentials","token","localStorage","setItem","getUser","getToken","getItem","payload","JSON","parse","atob","split","exp","Date","now","removeItem","user","logOut"],"mappings":"AAAA,OAAO,KAAKA,QAAZ,MAA0B,aAA1B;AAEA,OAAO,eAAeC,MAAf,CAAsBC,QAAtB,EAAgC;AACrC,MAAI;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACA,UAAMC,UAAU,GAAG,MAAML,QAAQ,CAACC,MAAT,CAAgBC,QAAhB,CAAzB;AACA,WAAOG,UAAP;AACD,GAJD,CAIE,MAAM;AACN,UAAM,IAAIC,KAAJ,CAAU,iBAAV,CAAN;AACD;AACF;AAED,OAAO,eAAeC,KAAf,CAAqBC,WAArB,EAAkC;AACvC,MAAI;AACF,UAAMC,KAAK,GAAG,MAAMT,QAAQ,CAACO,KAAT,CAAeC,WAAf,CAApB;AACAE,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,KAA9B;AACA,WAAOG,OAAO,EAAd;AACD,GAJD,CAIE,MAAM;AACN,UAAM,IAAIN,KAAJ,CAAU,iCAAV,CAAN;AACD;AACF;AAED,OAAO,SAASO,QAAT,GAAoB;AACzB,QAAMJ,KAAK,GAAGC,YAAY,CAACI,OAAb,CAAqB,OAArB,CAAd;AACA,MAAI,CAACL,KAAL,EAAY,OAAO,IAAP;AAEZ,QAAMM,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACT,KAAK,CAACU,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,CAAhB;;AACA,MAAIJ,OAAO,CAACK,GAAR,GAAcC,IAAI,CAACC,GAAL,KAAa,IAA/B,EAAsC;AACpCZ,IAAAA,YAAY,CAACa,UAAb,CAAwB,OAAxB;AACA,WAAO,IAAP;AACD;;AACD,SAAOd,KAAP;AACD;AAED,OAAO,SAASG,OAAT,GAAmB;AACxB,QAAMH,KAAK,GAAGI,QAAQ,EAAtB;AACA,SAAOJ,KAAK,GAAGO,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACT,KAAK,CAACU,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAD,CAAf,EAAsCK,IAAzC,GAAgD,IAA5D;AACD;AAED,OAAO,SAASC,MAAT,GAAkB;AACvBf,EAAAA,YAAY,CAACa,UAAb,CAAwB,OAAxB;AACD","sourcesContent":["import * as usersAPI from \"./users-api\";\n\nexport async function signUp(userData) {\n  try {\n    console.log(\"jsdfjkjsddfjlsdnfjlksdfn\")\n    const userSigned = await usersAPI.signUp(userData);\n    return userSigned;\n  } catch {\n    throw new Error(\"Invalid Sign Up\");\n  }\n}\n\nexport async function login(credentials) {\n  try {\n    const token = await usersAPI.login(credentials);\n    localStorage.setItem(\"token\", token);\n    return getUser();\n  } catch {\n    throw new Error(\"Invalid Credentials - Try Again\");\n  }\n}\n\nexport function getToken() {\n  const token = localStorage.getItem(\"token\");\n  if (!token) return null;\n\n  const payload = JSON.parse(atob(token.split(\".\")[1]));\n  if (payload.exp < Date.now() / 1000 ) {\n    localStorage.removeItem(\"token\");\n    return null;\n  }\n  return token;\n}\n\nexport function getUser() {\n  const token = getToken();\n  return token ? JSON.parse(atob(token.split(\".\")[1])).user : null;\n}\n\nexport function logOut() {\n  localStorage.removeItem(\"token\");\n}"]},"metadata":{},"sourceType":"module"}