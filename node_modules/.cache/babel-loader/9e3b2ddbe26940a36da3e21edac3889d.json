{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Riya\\\\OneDrive\\\\Desktop\\\\trader-among-us-master\\\\src\\\\components\\\\ItemDrag\\\\ItemDrag.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport Column from \"../../components/Column/Column\";\nimport itemsApi from \"../../utils/items-api\";\nimport { getUser } from \"../../utils/users-service\";\nimport \"./ItemDrag.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst data = {\n  items: {\n    \"itm-1\": {\n      id: \"itm-1\",\n      name: \"item1\",\n      description: \"somedes\",\n      img: \"https://cdn.greatlifepublishing.net/wp-content/uploads/sites/4/2015/10/23150611/coffee-grinder-715170_960_720.jpg\"\n    },\n    \"itm-2\": {\n      id: \"itm-2\",\n      name: \"item2\",\n      description: \"somedes\",\n      img: \"https://wl-brightside.cf.tsp.li/resize/728x/jpg/181/4fb/2a0b6e52e29e3ba58697034db7.jpg\"\n    },\n    \"itm-3\": {\n      id: \"itm-3\",\n      name: \"item3\",\n      description: \"somedes\",\n      img: \"https://thumbs.dreamstime.com/b/kitchen-antique-items-rural-life-composition-objects-dark-background-194158844.jpg\"\n    }\n  },\n  columns: {\n    \"col-1\": {\n      id: \"col-1\",\n      title: \"Your Items\",\n      itemIds: []\n    },\n    \"col-2\": {\n      id: \"col-2\",\n      title: \"Post Items\",\n      itemIds: []\n    }\n  },\n  columnOrder: [\"col-1\", \"col-2\"]\n};\nexport default function ItemDrag({\n  setItemsOffered\n}) {\n  _s();\n\n  const user = getUser();\n  const userId = user._id;\n\n  const loadItems = async () => {\n    const res = await itemsApi.show(userId);\n    const itemsForDrag = res.item;\n    let itemIds = itemsForDrag.map(item => item._id);\n    data.columns[\"col-1\"].itemIds = itemIds;\n    itemsForDrag.forEach(item => {\n      data.items[item._id] = {\n        id: item._id,\n        name: item.title,\n        img: item.image\n      };\n    });\n    setItems({ ...data\n    });\n  };\n\n  const [items, setItems] = useState(data);\n  const columns = items.columnOrder;\n  useEffect(() => {\n    loadItems();\n  }, []);\n  useEffect(() => {\n    const itemsoffered = items.columns[\"col-2\"].itemIds;\n    setItemsOffered(itemsoffered);\n  }, [items, setItemsOffered]);\n\n  const onDragEnd = result => {\n    const {\n      destination,\n      source,\n      draggableId\n    } = result;\n    if (!destination) return;\n\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return;\n    }\n\n    const start = items.columns[source.droppableId];\n    const end = items.columns[destination.droppableId];\n\n    if (start === end) {\n      const newItemIds = Array.from(start.itemIds);\n      newItemIds.splice(source.index, 1);\n      newItemIds.splice(destination.index, 0, draggableId);\n      const newStartColumn = { ...start,\n        itemIds: newItemIds\n      };\n      const newState = { ...items,\n        columns: { ...items.columns,\n          [newStartColumn.id]: newStartColumn\n        }\n      };\n      setItems(newState);\n      return;\n    } //Moving to different column\n\n\n    const startItemIds = Array.from(start.itemIds);\n    startItemIds.splice(source.index, 1);\n    const newStart = { ...start,\n      itemIds: startItemIds\n    };\n    const endItemIds = Array.from(end.itemIds);\n    endItemIds.splice(destination.index, 0, draggableId);\n    const newEnd = { ...end,\n      itemIds: endItemIds\n    };\n    const newState = { ...items,\n      columns: { ...items.columns,\n        [newStart.id]: newStart,\n        [newEnd.id]: newEnd\n      }\n    };\n    setItems(newState);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(DragDropContext, {\n      onDragEnd: onDragEnd,\n      children: columns.map(colId => {\n        const column = items.columns[colId];\n        const res = column.itemIds.map(itemId => items.items[itemId]);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"Bid-list\",\n          children: /*#__PURE__*/_jsxDEV(Column, {\n            column: column,\n            res: res\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 74\n          }, this)\n        }, `col-${column.id}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 23\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 145,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ItemDrag, \"pcowrdG9mCC08wx0FtcCOt8iqFs=\");\n\n_c = ItemDrag;\n\nvar _c;\n\n$RefreshReg$(_c, \"ItemDrag\");","map":{"version":3,"sources":["C:/Users/Riya/OneDrive/Desktop/trader-among-us-master/src/components/ItemDrag/ItemDrag.jsx"],"names":["React","useState","useEffect","DragDropContext","Column","itemsApi","getUser","data","items","id","name","description","img","columns","title","itemIds","columnOrder","ItemDrag","setItemsOffered","user","userId","_id","loadItems","res","show","itemsForDrag","item","map","forEach","image","setItems","itemsoffered","onDragEnd","result","destination","source","draggableId","droppableId","index","start","end","newItemIds","Array","from","splice","newStartColumn","newState","startItemIds","newStart","endItemIds","newEnd","colId","column","itemId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { DragDropContext } from \"react-beautiful-dnd\";\nimport Column from \"../../components/Column/Column\";\nimport itemsApi from \"../../utils/items-api\";\nimport { getUser } from \"../../utils/users-service\";\nimport \"./ItemDrag.css\";\n\nconst data = {\n  items: {\n    \"itm-1\": {\n      id: \"itm-1\",\n      name: \"item1\",\n      description: \"somedes\",\n      img: \"https://cdn.greatlifepublishing.net/wp-content/uploads/sites/4/2015/10/23150611/coffee-grinder-715170_960_720.jpg\"\n    },\n    \"itm-2\": {\n      id: \"itm-2\",\n      name: \"item2\",\n      description: \"somedes\",\n      img: \"https://wl-brightside.cf.tsp.li/resize/728x/jpg/181/4fb/2a0b6e52e29e3ba58697034db7.jpg\"\n    },\n    \"itm-3\": {\n      id: \"itm-3\",\n      name: \"item3\",\n      description: \"somedes\",\n      img: \"https://thumbs.dreamstime.com/b/kitchen-antique-items-rural-life-composition-objects-dark-background-194158844.jpg\"\n    },\n  },\n  columns: {\n    \"col-1\": {\n      id: \"col-1\",\n      title: \"Your Items\",\n      itemIds: []\n    },\n    \"col-2\": {\n      id: \"col-2\",\n      title: \"Post Items\",\n      itemIds: [],\n    },\n  },\n  columnOrder: [\"col-1\", \"col-2\"],\n};\n\nexport default function ItemDrag({ setItemsOffered }) {\n  const user = getUser();\n  const userId = user._id;\n\n  const loadItems = async () => {\n    const res = await itemsApi.show(userId);\n    const itemsForDrag = res.item;\n    let itemIds = itemsForDrag.map(item => item._id);\n    data.columns[\"col-1\"].itemIds = itemIds;\n    itemsForDrag.forEach(item => {\n      data.items[item._id] = {\n        id: item._id,\n        name: item.title,\n        img: item.image,\n      };     \n    });\n    \n    setItems({...data});\n    \n  };\n\n  const [items, setItems] = useState(data);\n  const columns = items.columnOrder;\n\n  useEffect(() => {\n    loadItems();\n    \n  }, []);\n\n  useEffect(() => {\n    const itemsoffered = items.columns[\"col-2\"].itemIds;\n    setItemsOffered(itemsoffered);\n  }, [items, setItemsOffered]);\n\n  const onDragEnd = result => {\n    const { destination, source, draggableId } = result;\n\n    if (!destination) return;\n\n    if (\n      destination.droppableId === source.droppableId &&\n      destination.index === source.index\n    ) {\n      return;\n    }\n\n    const start = items.columns[source.droppableId];\n    const end = items.columns[destination.droppableId];\n\n    if (start === end) {\n      const newItemIds = Array.from(start.itemIds);\n\n      newItemIds.splice(source.index, 1);\n      newItemIds.splice(destination.index, 0, draggableId);\n\n      const newStartColumn = {\n        ...start,\n        itemIds: newItemIds,\n      };\n\n      const newState = {\n        ...items,\n        columns: {\n          ...items.columns,\n          [newStartColumn.id]: newStartColumn,\n        }\n      };\n\n      setItems(newState);\n      return;\n    }\n\n    //Moving to different column\n    const startItemIds = Array.from(start.itemIds);\n    startItemIds.splice(source.index, 1);\n    const newStart = {\n      ...start,\n      itemIds: startItemIds,\n    };\n\n    const endItemIds = Array.from(end.itemIds);\n    endItemIds.splice(destination.index, 0, draggableId);\n    const newEnd = {\n      ...end,\n      itemIds: endItemIds,\n    };\n\n    const newState = {\n      ...items,\n      columns: {\n        ...items.columns,\n        [newStart.id]: newStart,\n        [newEnd.id]: newEnd,\n      }\n    };\n    setItems(newState);\n    \n\n  };\n\n  return (\n    <div>\n      <DragDropContext  onDragEnd={onDragEnd}>\n            {columns.map((colId) => {\n              const column = items.columns[colId];\n              const res = column.itemIds.map(itemId => items.items[itemId]);\n              return (<div key={`col-${column.id}`} className=\"Bid-list\"><Column column={column} res={res} /></div>);\n            })}\n          </DragDropContext>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}